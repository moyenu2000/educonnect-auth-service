
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.3)

2025-07-22 12:34:05 [main] INFO  c.e.d.EduConnectDiscussionServiceApplication - Starting EduConnectDiscussionServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 348005 (/home/pridesys/projects/408_backend/educonnect-auth-service/discussion-service/target/discussion-service-0.0.1-SNAPSHOT.jar started by pridesys in /home/pridesys/projects/408_backend/educonnect-auth-service/discussion-service)
2025-07-22 12:34:05 [main] DEBUG c.e.d.EduConnectDiscussionServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-22 12:34:05 [main] INFO  c.e.d.EduConnectDiscussionServiceApplication - The following 1 profile is active: "docker"
2025-07-22 12:34:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-22 12:34:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-22 12:34:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 261 ms. Found 12 JPA repository interfaces.
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.AIQueryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.AnswerRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.BookmarkRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.ConversationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.DiscussionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.FileAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.GroupMemberRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.GroupRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.MessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.NotificationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.educonnect.discussion.repository.VoteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-22 12:34:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 0 Redis repository interfaces.
2025-07-22 12:34:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8082 (http)
2025-07-22 12:34:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-22 12:34:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-22 12:34:09 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-07-22 12:34:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4599 ms
2025-07-22 12:34:10 [main] DEBUG c.e.d.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-22 12:34:10 [main] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Filter 'jwtAuthenticationFilterFixed' configured for use
2025-07-22 12:34:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-22 12:34:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-22 12:34:10 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-22 12:34:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-22 12:34:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-22 12:34:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@75f2ff80
2025-07-22 12:34:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-22 12:34:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-22 12:34:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.13
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-22 12:34:13 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-22 12:34:15 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-22 12:34:16 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-22 12:34:19 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-22 12:34:20 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-07-22 12:34:20 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c5e7aacd-98a5-47cc-93f7-fb4ebe1b5454

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-07-22 12:34:20 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-07-22 12:34:20 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilterFixed, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-22 12:34:21 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-22 12:34:21 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7957385c]]
2025-07-22 12:34:21 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-22 12:34:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8082 (http) with context path '/api/v1'
2025-07-22 12:34:22 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: [localhost:5672]
2025-07-22 12:34:22 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: rabbitConnectionFactory#c5e5395:0/SimpleConnection@2ba859bf [delegate=amqp://educonnect@127.0.0.1:5672/, localPort=60978]
2025-07-22 12:34:22 [main] INFO  c.e.d.EduConnectDiscussionServiceApplication - Started EduConnectDiscussionServiceApplication in 18.367 seconds (process running for 19.241)
2025-07-22 12:35:21 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-07-22 12:36:07 [http-nio-8082-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-22 12:36:07 [http-nio-8082-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-22 12:36:07 [http-nio-8082-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/actuator/health
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 12:36:07 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/actuator/health
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 12:36:33 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInJvbGUiOiJBRE1JTiIsImZ1bGxOYW1lIjoiVGVzdCBVc2VyIiwiaWF0IjoxNzUzMTY2MDExLCJleHAiOjE3NTMyNTI0MTF9._rK6W2R7RkOnmvouU-2p03t4ncpRXCnqzKoA0OX_B54'
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 281
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzI1NiIs...
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 281)
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyenuddin075@gmail.com with role: ADMIN
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyenuddin075@gmail.com with authorities: [ROLE_ADMIN]
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /discussions
2025-07-22 12:36:47 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /discussions
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInJvbGUiOiJBRE1JTiIsImZ1bGxOYW1lIjoiVGVzdCBVc2VyIiwiaWF0IjoxNzUzMTY2MDExLCJleHAiOjE3NTMyNTI0MTF9._rK6W2R7RkOnmvouU-2p03t4ncpRXCnqzKoA0OX_B54'
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 281
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzI1NiIs...
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 281)
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyenuddin075@gmail.com with role: ADMIN
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyenuddin075@gmail.com with authorities: [ROLE_ADMIN]
2025-07-22 12:36:56 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /discussions
2025-07-22 12:36:57 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.createDiscussion(com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 12:36:57 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.createDiscussion(com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@499a3c0d and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('STUDENT')]
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /discussions
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInJvbGUiOiJTVFVERU5UIiwiZnVsbE5hbWUiOiJUZXN0IFVzZXIiLCJpYXQiOjE3NTMxNjYyMzMsImV4cCI6MTc1MzI1MjYzM30.gy1uZLDzR86qILX2iJzOnCRhHSZFpqSd4DtPT_Vr7cs'
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 284
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzI1NiIs...
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 284)
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:37:28 [http-nio-8082-exec-6] ERROR c.e.d.security.JwtUtilsFixed - JWT validation error: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: false
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation failed
2025-07-22 12:37:28 [http-nio-8082-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 12:37:28 [http-nio-8082-exec-6] ERROR c.e.d.s.JwtAuthenticationEntryPoint - Responding with unauthorized error. Message - Full authentication is required to access this resource
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions?page=0
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInJvbGUiOiJBRE1JTiIsImZ1bGxOYW1lIjoiVGVzdCBVc2VyIiwiaWF0IjoxNzUzMTY2MDExLCJleHAiOjE3NTMyNTI0MTF9._rK6W2R7RkOnmvouU-2p03t4ncpRXCnqzKoA0OX_B54'
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 281
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzI1NiIs...
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 281)
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyenuddin075@gmail.com with role: ADMIN
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyenuddin075@gmail.com with authorities: [ROLE_ADMIN]
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /discussions?page=0
2025-07-22 12:43:50 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /groups
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInJvbGUiOiJBRE1JTiIsImZ1bGxOYW1lIjoiVGVzdCBVc2VyIiwiaWF0IjoxNzUzMTY2MDExLCJleHAiOjE3NTMyNTI0MTF9._rK6W2R7RkOnmvouU-2p03t4ncpRXCnqzKoA0OX_B54'
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 281
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzI1NiIs...
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 281)
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyenuddin075@gmail.com with role: ADMIN
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyenuddin075@gmail.com with authorities: [ROLE_ADMIN]
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /groups
2025-07-22 12:45:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        (
            ? is null 
            or g1_0.type=?
        ) 
        and (
            ? is null 
            or g1_0.subject_id=?
        ) 
        and (
            ? is null 
            or g1_0.is_private=?
        ) 
    fetch
        first ? rows only
Hibernate: 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        (
            ? is null 
            or g1_0.type=?
        ) 
        and (
            ? is null 
            or g1_0.subject_id=?
        ) 
        and (
            ? is null 
            or g1_0.is_private=?
        ) 
    fetch
        first ? rows only
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 12:57:08 [http-nio-8082-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 12:57:08 [http-nio-8082-exec-2] ERROR c.e.d.s.JwtAuthenticationEntryPoint - Responding with unauthorized error. Message - Full authentication is required to access this resource
2025-07-22 13:05:21 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions/public?page=0&size=5
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/public
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /discussions/public?page=0&size=5
2025-07-22 13:08:34 [http-nio-8082-exec-1] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions?page=0&size=5
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /discussions?page=0&size=5
2025-07-22 13:08:42 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status=? 
        and (
            ? is null 
            or d1_0.type=?
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.topic_id=?
        ) 
        and (
            ? is null 
            or d1_0.class_level=?
        ) 
        and (
            ? is null 
            or d1_0.group_id=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /discussions
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /discussions
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.createDiscussion(com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.createDiscussion(com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:08:52 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:08:53 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussions
        (answers_count, author_id, class_level, content, created_at, downvotes_count, group_id, has_accepted_answer, is_anonymous, status, subject_id, title, topic_id, type, updated_at, upvotes_count, views_count) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.discussions
        (answers_count, author_id, class_level, content, created_at, downvotes_count, group_id, has_accepted_answer, is_anonymous, status, subject_id, title, topic_id, type, updated_at, upvotes_count, views_count) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:08:53 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:08:53 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions/1
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 13:09:00 [http-nio-8082-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 13:09:00 [http-nio-8082-exec-6] ERROR c.e.d.s.JwtAuthenticationEntryPoint - Responding with unauthorized error. Message - Full authentication is required to access this resource
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions/1
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /discussions/1
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    update
        discussion.discussions d1_0 
    set
        views_count=(d1_0.views_count+1) 
    where
        d1_0.id=?
Hibernate: 
    update
        discussion.discussions d1_0 
    set
        views_count=(d1_0.views_count+1) 
    where
        d1_0.id=?
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
Hibernate: 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.discussion_id,
        t1_0.tag 
    from
        discussion.discussion_tags t1_0 
    where
        t1_0.discussion_id=?
Hibernate: 
    select
        t1_0.discussion_id,
        t1_0.tag 
    from
        discussion.discussion_tags t1_0 
    where
        t1_0.discussion_id=?
2025-07-22 13:09:08 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.discussion_id,
        a1_0.attachment_url 
    from
        discussion.discussion_attachments a1_0 
    where
        a1_0.discussion_id=?
Hibernate: 
    select
        a1_0.discussion_id,
        a1_0.attachment_url 
    from
        discussion.discussion_attachments a1_0 
    where
        a1_0.discussion_id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /discussions/1
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /discussions/1
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.updateDiscussion(java.lang.Long,com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.updateDiscussion(java.lang.Long,com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    update
        discussion.discussions 
    set
        answers_count=?,
        author_id=?,
        class_level=?,
        content=?,
        downvotes_count=?,
        group_id=?,
        has_accepted_answer=?,
        is_anonymous=?,
        status=?,
        subject_id=?,
        title=?,
        topic_id=?,
        type=?,
        updated_at=?,
        upvotes_count=?,
        views_count=? 
    where
        id=?
Hibernate: 
    update
        discussion.discussions 
    set
        answers_count=?,
        author_id=?,
        class_level=?,
        content=?,
        downvotes_count=?,
        group_id=?,
        has_accepted_answer=?,
        is_anonymous=?,
        status=?,
        subject_id=?,
        title=?,
        topic_id=?,
        type=?,
        updated_at=?,
        upvotes_count=?,
        views_count=? 
    where
        id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    delete 
    from
        discussion.discussion_attachments 
    where
        discussion_id=?
Hibernate: 
    delete 
    from
        discussion.discussion_attachments 
    where
        discussion_id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    delete 
    from
        discussion.discussion_tags 
    where
        discussion_id=?
Hibernate: 
    delete 
    from
        discussion.discussion_tags 
    where
        discussion_id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
Hibernate: 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
2025-07-22 13:09:18 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /discussions/1/upvote
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1/upvote
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /discussions/1/upvote
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.upvoteDiscussion(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.upvoteDiscussion(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
Hibernate: 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.votes
        (answer_id, created_at, discussion_id, is_upvote, user_id) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.votes
        (answer_id, created_at, discussion_id, is_upvote, user_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-22 13:09:27 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    update
        discussion.discussions 
    set
        answers_count=?,
        author_id=?,
        class_level=?,
        content=?,
        downvotes_count=?,
        group_id=?,
        has_accepted_answer=?,
        is_anonymous=?,
        status=?,
        subject_id=?,
        title=?,
        topic_id=?,
        type=?,
        updated_at=?,
        upvotes_count=?,
        views_count=? 
    where
        id=?
Hibernate: 
    update
        discussion.discussions 
    set
        answers_count=?,
        author_id=?,
        class_level=?,
        content=?,
        downvotes_count=?,
        group_id=?,
        has_accepted_answer=?,
        is_anonymous=?,
        status=?,
        subject_id=?,
        title=?,
        topic_id=?,
        type=?,
        updated_at=?,
        upvotes_count=?,
        views_count=? 
    where
        id=?
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /discussions/1/bookmark
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1/bookmark
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /discussions/1/bookmark
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.bookmarkDiscussion(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.DiscussionController.bookmarkDiscussion(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.DiscussionController]
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.created_at,
        b1_0.discussion_id,
        b1_0.user_id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
Hibernate: 
    select
        b1_0.id,
        b1_0.created_at,
        b1_0.discussion_id,
        b1_0.user_id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
2025-07-22 13:09:38 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.bookmarks
        (created_at, discussion_id, user_id) 
    values
        (?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.bookmarks
        (created_at, discussion_id, user_id) 
    values
        (?, ?, ?)
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /discussions/1/answers
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1/answers
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /discussions/1/answers
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AnswerController.createAnswer(java.lang.Long,com.educonnect.discussion.dto.AnswerRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AnswerController]
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AnswerController.createAnswer(java.lang.Long,com.educonnect.discussion.dto.AnswerRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AnswerController]
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.answers
        (author_id, content, created_at, discussion_id, downvotes_count, is_accepted, is_anonymous, updated_at, upvotes_count) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.answers
        (author_id, content, created_at, discussion_id, downvotes_count, is_accepted, is_anonymous, updated_at, upvotes_count) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:09:49 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    update
        discussion.discussions d1_0 
    set
        answers_count=(d1_0.answers_count+1) 
    where
        d1_0.id=?
Hibernate: 
    update
        discussion.discussions d1_0 
    set
        answers_count=(d1_0.answers_count+1) 
    where
        d1_0.id=?
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions/1/answers?page=0&size=10
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1/answers
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 13:09:56 [http-nio-8082-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 13:09:56 [http-nio-8082-exec-1] ERROR c.e.d.s.JwtAuthenticationEntryPoint - Responding with unauthorized error. Message - Full authentication is required to access this resource
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /discussions/1/answers?page=0&size=10
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/discussions/1/answers
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /discussions/1/answers?page=0&size=10
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.author_id,
        a1_0.content,
        a1_0.created_at,
        a1_0.discussion_id,
        a1_0.downvotes_count,
        a1_0.is_accepted,
        a1_0.is_anonymous,
        a1_0.updated_at,
        a1_0.upvotes_count 
    from
        discussion.answers a1_0 
    left join
        discussion.discussions d1_0 
            on d1_0.id=a1_0.discussion_id 
    where
        d1_0.id=? 
    order by
        a1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        a1_0.id,
        a1_0.author_id,
        a1_0.content,
        a1_0.created_at,
        a1_0.discussion_id,
        a1_0.downvotes_count,
        a1_0.is_accepted,
        a1_0.is_anonymous,
        a1_0.updated_at,
        a1_0.upvotes_count 
    from
        discussion.answers a1_0 
    left join
        discussion.discussions d1_0 
            on d1_0.id=a1_0.discussion_id 
    where
        d1_0.id=? 
    order by
        a1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:10:06 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.answer_id,
        a1_0.attachment_url 
    from
        discussion.answer_attachments a1_0 
    where
        a1_0.answer_id=?
Hibernate: 
    select
        a1_0.answer_id,
        a1_0.attachment_url 
    from
        discussion.answer_attachments a1_0 
    where
        a1_0.answer_id=?
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /answers/1/upvote
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/answers/1/upvote
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /answers/1/upvote
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AnswerController.upvoteAnswer(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AnswerController]
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AnswerController.upvoteAnswer(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AnswerController]
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.author_id,
        a1_0.content,
        a1_0.created_at,
        a1_0.discussion_id,
        a1_0.downvotes_count,
        a1_0.is_accepted,
        a1_0.is_anonymous,
        a1_0.updated_at,
        a1_0.upvotes_count 
    from
        discussion.answers a1_0 
    where
        a1_0.id=?
Hibernate: 
    select
        a1_0.id,
        a1_0.author_id,
        a1_0.content,
        a1_0.created_at,
        a1_0.discussion_id,
        a1_0.downvotes_count,
        a1_0.is_accepted,
        a1_0.is_anonymous,
        a1_0.updated_at,
        a1_0.upvotes_count 
    from
        discussion.answers a1_0 
    where
        a1_0.id=?
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.answers a1_0 
            on a1_0.id=v1_0.answer_id 
    where
        u1_0.id=? 
        and a1_0.id=?
Hibernate: 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.answers a1_0 
            on a1_0.id=v1_0.answer_id 
    where
        u1_0.id=? 
        and a1_0.id=?
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.votes
        (answer_id, created_at, discussion_id, is_upvote, user_id) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.votes
        (answer_id, created_at, discussion_id, is_upvote, user_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-22 13:10:15 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    update
        discussion.answers 
    set
        author_id=?,
        content=?,
        discussion_id=?,
        downvotes_count=?,
        is_accepted=?,
        is_anonymous=?,
        updated_at=?,
        upvotes_count=? 
    where
        id=?
Hibernate: 
    update
        discussion.answers 
    set
        author_id=?,
        content=?,
        discussion_id=?,
        downvotes_count=?,
        is_accepted=?,
        is_anonymous=?,
        updated_at=?,
        upvotes_count=? 
    where
        id=?
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /answers/1/accept
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/answers/1/accept
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /answers/1/accept
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AnswerController.acceptAnswer(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AnswerController]
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AnswerController.acceptAnswer(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AnswerController]
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.author_id,
        a1_0.content,
        a1_0.created_at,
        a1_0.discussion_id,
        a1_0.downvotes_count,
        a1_0.is_accepted,
        a1_0.is_anonymous,
        a1_0.updated_at,
        a1_0.upvotes_count 
    from
        discussion.answers a1_0 
    where
        a1_0.id=?
Hibernate: 
    select
        a1_0.id,
        a1_0.author_id,
        a1_0.content,
        a1_0.created_at,
        a1_0.discussion_id,
        a1_0.downvotes_count,
        a1_0.is_accepted,
        a1_0.is_anonymous,
        a1_0.updated_at,
        a1_0.upvotes_count 
    from
        discussion.answers a1_0 
    where
        a1_0.id=?
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.id=?
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    update
        discussion.answers a1_0 
    set
        is_accepted=false 
    where
        a1_0.discussion_id=?
Hibernate: 
    update
        discussion.answers a1_0 
    set
        is_accepted=false 
    where
        a1_0.discussion_id=?
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    update
        discussion.answers 
    set
        author_id=?,
        content=?,
        discussion_id=?,
        downvotes_count=?,
        is_accepted=?,
        is_anonymous=?,
        updated_at=?,
        upvotes_count=? 
    where
        id=?
Hibernate: 
    update
        discussion.answers 
    set
        author_id=?,
        content=?,
        discussion_id=?,
        downvotes_count=?,
        is_accepted=?,
        is_anonymous=?,
        updated_at=?,
        upvotes_count=? 
    where
        id=?
2025-07-22 13:10:24 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    update
        discussion.discussions 
    set
        answers_count=?,
        author_id=?,
        class_level=?,
        content=?,
        downvotes_count=?,
        group_id=?,
        has_accepted_answer=?,
        is_anonymous=?,
        status=?,
        subject_id=?,
        title=?,
        topic_id=?,
        type=?,
        updated_at=?,
        upvotes_count=?,
        views_count=? 
    where
        id=?
Hibernate: 
    update
        discussion.discussions 
    set
        answers_count=?,
        author_id=?,
        class_level=?,
        content=?,
        downvotes_count=?,
        group_id=?,
        has_accepted_answer=?,
        is_anonymous=?,
        status=?,
        subject_id=?,
        title=?,
        topic_id=?,
        type=?,
        updated_at=?,
        upvotes_count=?,
        views_count=? 
    where
        id=?
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /groups?page=0&size=10
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 13:10:38 [http-nio-8082-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 13:10:38 [http-nio-8082-exec-8] ERROR c.e.d.s.JwtAuthenticationEntryPoint - Responding with unauthorized error. Message - Full authentication is required to access this resource
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /groups?page=0&size=10
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /groups?page=0&size=10
2025-07-22 13:10:47 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        (
            ? is null 
            or g1_0.type=?
        ) 
        and (
            ? is null 
            or g1_0.subject_id=?
        ) 
        and (
            ? is null 
            or g1_0.is_private=?
        ) 
    fetch
        first ? rows only
Hibernate: 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        (
            ? is null 
            or g1_0.type=?
        ) 
        and (
            ? is null 
            or g1_0.subject_id=?
        ) 
        and (
            ? is null 
            or g1_0.is_private=?
        ) 
    fetch
        first ? rows only
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /groups
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /groups
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.createGroup(com.educonnect.discussion.dto.GroupRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.createGroup(com.educonnect.discussion.dto.GroupRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_groups
        (avatar_url, class_level, created_at, created_by_id, description, discussions_count, is_private, members_count, name, rules, subject_id, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_groups
        (avatar_url, class_level, created_at, created_by_id, description, discussions_count, is_private, members_count, name, rules, subject_id, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:10:58 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.group_members
        (group_id, joined_at, role, user_id) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.group_members
        (group_id, joined_at, role, user_id) 
    values
        (?, ?, ?, ?)
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /groups/1
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups/1
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:11:07 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /groups/1
2025-07-22 13:11:08 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        g1_0.id=?
Hibernate: 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        g1_0.id=?
2025-07-22 13:11:08 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /groups/1/members?page=0&size=20
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups/1/members
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:11:16 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /groups/1/members?page=0&size=20
2025-07-22 13:11:17 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.getGroupMembers(java.lang.Long,int,int,com.educonnect.discussion.enums.GroupRole,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:11:17 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.getGroupMembers(java.lang.Long,int,int,com.educonnect.discussion.enums.GroupRole,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:11:17 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        gm1_0.id 
    from
        discussion.group_members gm1_0 
    left join
        discussion.discussion_groups g1_0 
            on g1_0.id=gm1_0.group_id 
    left join
        discussion.users u1_0 
            on u1_0.id=gm1_0.user_id 
    where
        g1_0.id=? 
        and u1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        gm1_0.id 
    from
        discussion.group_members gm1_0 
    left join
        discussion.discussion_groups g1_0 
            on g1_0.id=gm1_0.group_id 
    left join
        discussion.users u1_0 
            on u1_0.id=gm1_0.user_id 
    where
        g1_0.id=? 
        and u1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:11:17 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        gm1_0.id,
        gm1_0.group_id,
        gm1_0.joined_at,
        gm1_0.role,
        gm1_0.user_id 
    from
        discussion.group_members gm1_0 
    where
        gm1_0.group_id=? 
        and (
            ? is null 
            or gm1_0.role=?
        ) 
    fetch
        first ? rows only
Hibernate: 
    select
        gm1_0.id,
        gm1_0.group_id,
        gm1_0.joined_at,
        gm1_0.role,
        gm1_0.user_id 
    from
        discussion.group_members gm1_0 
    where
        gm1_0.group_id=? 
        and (
            ? is null 
            or gm1_0.role=?
        ) 
    fetch
        first ? rows only
2025-07-22 13:11:17 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /groups/1/discussions
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups/1/discussions
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:11:29 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /groups/1/discussions
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /groups/1/discussions
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups/1/discussions
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /groups/1/discussions
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.createGroupDiscussion(java.lang.Long,com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.createGroupDiscussion(java.lang.Long,com.educonnect.discussion.dto.DiscussionRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    select
        gm1_0.id 
    from
        discussion.group_members gm1_0 
    left join
        discussion.discussion_groups g1_0 
            on g1_0.id=gm1_0.group_id 
    left join
        discussion.users u1_0 
            on u1_0.id=gm1_0.user_id 
    where
        g1_0.id=? 
        and u1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        gm1_0.id 
    from
        discussion.group_members gm1_0 
    left join
        discussion.discussion_groups g1_0 
            on g1_0.id=gm1_0.group_id 
    left join
        discussion.users u1_0 
            on u1_0.id=gm1_0.user_id 
    where
        g1_0.id=? 
        and u1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussions
        (answers_count, author_id, class_level, content, created_at, downvotes_count, group_id, has_accepted_answer, is_anonymous, status, subject_id, title, topic_id, type, updated_at, upvotes_count, views_count) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.discussions
        (answers_count, author_id, class_level, content, created_at, downvotes_count, group_id, has_accepted_answer, is_anonymous, status, subject_id, title, topic_id, type, updated_at, upvotes_count, views_count) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:11:39 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.discussion_tags
        (discussion_id, tag) 
    values
        (?, ?)
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /groups/1/discussions?page=0&size=10
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/groups/1/discussions
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /groups/1/discussions?page=0&size=10
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.getGroupDiscussions(java.lang.Long,int,int,java.lang.String,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.GroupController.getGroupDiscussions(java.lang.Long,int,int,java.lang.String,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.GroupController]
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        gm1_0.id 
    from
        discussion.group_members gm1_0 
    left join
        discussion.discussion_groups g1_0 
            on g1_0.id=gm1_0.group_id 
    left join
        discussion.users u1_0 
            on u1_0.id=gm1_0.user_id 
    where
        g1_0.id=? 
        and u1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        gm1_0.id 
    from
        discussion.group_members gm1_0 
    left join
        discussion.discussion_groups g1_0 
            on g1_0.id=gm1_0.group_id 
    left join
        discussion.users u1_0 
            on u1_0.id=gm1_0.user_id 
    where
        g1_0.id=? 
        and u1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.group_id=? 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.group_id=? 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
Hibernate: 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.discussion_id,
        t1_0.tag 
    from
        discussion.discussion_tags t1_0 
    where
        t1_0.discussion_id=?
Hibernate: 
    select
        t1_0.discussion_id,
        t1_0.tag 
    from
        discussion.discussion_tags t1_0 
    where
        t1_0.discussion_id=?
2025-07-22 13:11:50 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.discussion_id,
        a1_0.attachment_url 
    from
        discussion.discussion_attachments a1_0 
    where
        a1_0.discussion_id=?
Hibernate: 
    select
        a1_0.discussion_id,
        a1_0.attachment_url 
    from
        discussion.discussion_attachments a1_0 
    where
        a1_0.discussion_id=?
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /messages/conversations?page=0&size=20
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/messages/conversations
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /messages/conversations?page=0&size=20
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.getConversations(int,int,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.getConversations(int,int,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.last_message_id,
        c1_0.unread_count,
        c1_0.updated_at 
    from
        discussion.conversations c1_0 
    join
        discussion.conversation_participants p1_0 
            on c1_0.id=p1_0.conversation_id 
    where
        p1_0.user_id=? 
    order by
        c1_0.updated_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.last_message_id,
        c1_0.unread_count,
        c1_0.updated_at 
    from
        discussion.conversations c1_0 
    join
        discussion.conversation_participants p1_0 
            on c1_0.id=p1_0.conversation_id 
    where
        p1_0.user_id=? 
    order by
        c1_0.updated_at desc 
    fetch
        first ? rows only
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.conversation_id,
        p1_1.id,
        p1_1.avatar_url,
        p1_1.bio,
        p1_1.created_at,
        p1_1.email,
        p1_1.full_name,
        p1_1.updated_at,
        p1_1.username 
    from
        discussion.conversation_participants p1_0 
    join
        discussion.users p1_1 
            on p1_1.id=p1_0.user_id 
    where
        p1_0.conversation_id=?
Hibernate: 
    select
        p1_0.conversation_id,
        p1_1.id,
        p1_1.avatar_url,
        p1_1.bio,
        p1_1.created_at,
        p1_1.email,
        p1_1.full_name,
        p1_1.updated_at,
        p1_1.username 
    from
        discussion.conversation_participants p1_0 
    join
        discussion.users p1_1 
            on p1_1.id=p1_0.user_id 
    where
        p1_0.conversation_id=?
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.conversation_id,
        p1_1.id,
        p1_1.avatar_url,
        p1_1.bio,
        p1_1.created_at,
        p1_1.email,
        p1_1.full_name,
        p1_1.updated_at,
        p1_1.username 
    from
        discussion.conversation_participants p1_0 
    join
        discussion.users p1_1 
            on p1_1.id=p1_0.user_id 
    where
        p1_0.conversation_id=?
Hibernate: 
    select
        p1_0.conversation_id,
        p1_1.id,
        p1_1.avatar_url,
        p1_1.bio,
        p1_1.created_at,
        p1_1.email,
        p1_1.full_name,
        p1_1.updated_at,
        p1_1.username 
    from
        discussion.conversation_participants p1_0 
    join
        discussion.users p1_1 
            on p1_1.id=p1_0.user_id 
    where
        p1_0.conversation_id=?
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.created_at,
        m1_0.is_edited,
        m1_0.is_read,
        m1_0.recipient_id,
        m1_0.sender_id,
        m1_0.type,
        m1_0.updated_at 
    from
        discussion.messages m1_0 
    where
        m1_0.id=?
Hibernate: 
    select
        m1_0.id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.created_at,
        m1_0.is_edited,
        m1_0.is_read,
        m1_0.recipient_id,
        m1_0.sender_id,
        m1_0.type,
        m1_0.updated_at 
    from
        discussion.messages m1_0 
    where
        m1_0.id=?
2025-07-22 13:12:11 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.message_id,
        a1_0.attachment_url 
    from
        discussion.message_attachments a1_0 
    where
        a1_0.message_id=?
Hibernate: 
    select
        a1_0.message_id,
        a1_0.attachment_url 
    from
        discussion.message_attachments a1_0 
    where
        a1_0.message_id=?
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /messages/conversations/1?page=0&size=50
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/messages/conversations/1
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /messages/conversations/1?page=0&size=50
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.getConversationMessages(java.lang.Long,int,int,java.time.LocalDateTime,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.getConversationMessages(java.lang.Long,int,int,java.time.LocalDateTime,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.last_message_id,
        c1_0.unread_count,
        c1_0.updated_at 
    from
        discussion.conversations c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.last_message_id,
        c1_0.unread_count,
        c1_0.updated_at 
    from
        discussion.conversations c1_0 
    where
        c1_0.id=?
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.conversation_id,
        p1_1.id,
        p1_1.avatar_url,
        p1_1.bio,
        p1_1.created_at,
        p1_1.email,
        p1_1.full_name,
        p1_1.updated_at,
        p1_1.username 
    from
        discussion.conversation_participants p1_0 
    join
        discussion.users p1_1 
            on p1_1.id=p1_0.user_id 
    where
        p1_0.conversation_id=?
Hibernate: 
    select
        p1_0.conversation_id,
        p1_1.id,
        p1_1.avatar_url,
        p1_1.bio,
        p1_1.created_at,
        p1_1.email,
        p1_1.full_name,
        p1_1.updated_at,
        p1_1.username 
    from
        discussion.conversation_participants p1_0 
    join
        discussion.users p1_1 
            on p1_1.id=p1_0.user_id 
    where
        p1_0.conversation_id=?
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.created_at,
        m1_0.is_edited,
        m1_0.is_read,
        m1_0.recipient_id,
        m1_0.sender_id,
        m1_0.type,
        m1_0.updated_at 
    from
        discussion.messages m1_0 
    left join
        discussion.conversations c1_0 
            on c1_0.id=m1_0.conversation_id 
    where
        c1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        m1_0.id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.created_at,
        m1_0.is_edited,
        m1_0.is_read,
        m1_0.recipient_id,
        m1_0.sender_id,
        m1_0.type,
        m1_0.updated_at 
    from
        discussion.messages m1_0 
    left join
        discussion.conversations c1_0 
            on c1_0.id=m1_0.conversation_id 
    where
        c1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:12:21 [http-nio-8082-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.message_id,
        a1_0.attachment_url 
    from
        discussion.message_attachments a1_0 
    where
        a1_0.message_id=?
Hibernate: 
    select
        a1_0.message_id,
        a1_0.attachment_url 
    from
        discussion.message_attachments a1_0 
    where
        a1_0.message_id=?
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /messages
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/messages
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /messages
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.sendMessage(com.educonnect.discussion.dto.MessageRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.sendMessage(com.educonnect.discussion.dto.MessageRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:12:33 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:12:34 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.last_message_id,
        c1_0.unread_count,
        c1_0.updated_at 
    from
        discussion.conversations c1_0 
    where
        (
            select
                count(*) 
            from
                discussion.conversation_participants p1_0 
            where
                c1_0.id=p1_0.conversation_id
        )=2 
        and exists(select
            p2_0.user_id 
        from
            discussion.conversation_participants p2_0 
        where
            p2_0.user_id=? 
            and c1_0.id=p2_0.conversation_id) 
        and exists(select
            p3_0.user_id 
        from
            discussion.conversation_participants p3_0 
        where
            p3_0.user_id=? 
            and c1_0.id=p3_0.conversation_id)
Hibernate: 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.last_message_id,
        c1_0.unread_count,
        c1_0.updated_at 
    from
        discussion.conversations c1_0 
    where
        (
            select
                count(*) 
            from
                discussion.conversation_participants p1_0 
            where
                c1_0.id=p1_0.conversation_id
        )=2 
        and exists(select
            p2_0.user_id 
        from
            discussion.conversation_participants p2_0 
        where
            p2_0.user_id=? 
            and c1_0.id=p2_0.conversation_id) 
        and exists(select
            p3_0.user_id 
        from
            discussion.conversation_participants p3_0 
        where
            p3_0.user_id=? 
            and c1_0.id=p3_0.conversation_id)
2025-07-22 13:12:34 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.messages
        (content, conversation_id, created_at, is_edited, is_read, recipient_id, sender_id, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.messages
        (content, conversation_id, created_at, is_edited, is_read, recipient_id, sender_id, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:12:34 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    update
        discussion.conversations 
    set
        last_message_id=?,
        unread_count=?,
        updated_at=? 
    where
        id=?
Hibernate: 
    update
        discussion.conversations 
    set
        last_message_id=?,
        unread_count=?,
        updated_at=? 
    where
        id=?
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /messages/4/read
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/messages/4/read
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /messages/4/read
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.markMessageAsRead(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.markMessageAsRead(java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:44 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.created_at,
        m1_0.is_edited,
        m1_0.is_read,
        m1_0.recipient_id,
        m1_0.sender_id,
        m1_0.type,
        m1_0.updated_at 
    from
        discussion.messages m1_0 
    where
        m1_0.id=?
Hibernate: 
    select
        m1_0.id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.created_at,
        m1_0.is_edited,
        m1_0.is_read,
        m1_0.recipient_id,
        m1_0.sender_id,
        m1_0.type,
        m1_0.updated_at 
    from
        discussion.messages m1_0 
    where
        m1_0.id=?
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /messages/unread-count
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/messages/unread-count
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /messages/unread-count
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.getUnreadCount(com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.MessageController.getUnreadCount(com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.MessageController]
2025-07-22 13:12:56 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.id) 
    from
        discussion.messages m1_0 
    where
        m1_0.recipient_id=? 
        and m1_0.is_read=false
Hibernate: 
    select
        count(m1_0.id) 
    from
        discussion.messages m1_0 
    where
        m1_0.recipient_id=? 
        and m1_0.is_read=false
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /notifications?page=0&size=20
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/notifications
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /notifications?page=0&size=20
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.NotificationController.getNotifications(int,int,com.educonnect.discussion.enums.NotificationType,java.lang.Boolean,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.NotificationController]
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.NotificationController.getNotifications(int,int,com.educonnect.discussion.enums.NotificationType,java.lang.Boolean,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.NotificationController]
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        n1_0.id,
        n1_0.content,
        n1_0.created_at,
        n1_0.is_read,
        n1_0.related_id,
        n1_0.related_type,
        n1_0.title,
        n1_0.type,
        n1_0.user_id 
    from
        discussion.notifications n1_0 
    where
        n1_0.user_id=? 
        and (
            ? is null 
            or n1_0.type=?
        ) 
        and (
            ? is null 
            or n1_0.is_read=?
        ) 
    fetch
        first ? rows only
Hibernate: 
    select
        n1_0.id,
        n1_0.content,
        n1_0.created_at,
        n1_0.is_read,
        n1_0.related_id,
        n1_0.related_type,
        n1_0.title,
        n1_0.type,
        n1_0.user_id 
    from
        discussion.notifications n1_0 
    where
        n1_0.user_id=? 
        and (
            ? is null 
            or n1_0.type=?
        ) 
        and (
            ? is null 
            or n1_0.is_read=?
        ) 
    fetch
        first ? rows only
2025-07-22 13:13:13 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.id) 
    from
        discussion.notifications n1_0 
    where
        n1_0.user_id=? 
        and n1_0.is_read=false
Hibernate: 
    select
        count(n1_0.id) 
    from
        discussion.notifications n1_0 
    where
        n1_0.user_id=? 
        and n1_0.is_read=false
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /notifications/unread-count
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/notifications/unread-count
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /notifications/unread-count
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.NotificationController.getUnreadCount(com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.NotificationController]
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.NotificationController.getUnreadCount(com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.NotificationController]
2025-07-22 13:13:22 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.id) 
    from
        discussion.notifications n1_0 
    where
        n1_0.user_id=? 
        and n1_0.is_read=false
Hibernate: 
    select
        count(n1_0.id) 
    from
        discussion.notifications n1_0 
    where
        n1_0.user_id=? 
        and n1_0.is_read=false
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /notifications/read-all
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/notifications/read-all
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /notifications/read-all
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.NotificationController.markAllNotificationsAsRead(com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.NotificationController]
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.NotificationController.markAllNotificationsAsRead(com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.NotificationController]
2025-07-22 13:13:31 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    update
        discussion.notifications n1_0 
    set
        is_read=true 
    where
        n1_0.user_id=?
Hibernate: 
    update
        discussion.notifications n1_0 
    set
        is_read=true 
    where
        n1_0.user_id=?
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /search/discussions?q=quadratic&page=0&size=10
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/search/discussions
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Not found
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'null'
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has no text
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Not found
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - No JWT token found in request
2025-07-22 13:13:46 [http-nio-8082-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-22 13:13:46 [http-nio-8082-exec-10] ERROR c.e.d.s.JwtAuthenticationEntryPoint - Responding with unauthorized error. Message - Full authentication is required to access this resource
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /search/discussions?q=quadratic&page=0&size=10
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/search/discussions
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /search/discussions?q=quadratic&page=0&size=10
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status='ACTIVE' 
        and (
            d1_0.title like ? escape '' 
            or d1_0.content like ? escape ''
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.type=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        d1_0.id,
        d1_0.answers_count,
        d1_0.author_id,
        d1_0.class_level,
        d1_0.content,
        d1_0.created_at,
        d1_0.downvotes_count,
        d1_0.group_id,
        d1_0.has_accepted_answer,
        d1_0.is_anonymous,
        d1_0.status,
        d1_0.subject_id,
        d1_0.title,
        d1_0.topic_id,
        d1_0.type,
        d1_0.updated_at,
        d1_0.upvotes_count,
        d1_0.views_count 
    from
        discussion.discussions d1_0 
    where
        d1_0.status='ACTIVE' 
        and (
            d1_0.title like ? escape '' 
            or d1_0.content like ? escape ''
        ) 
        and (
            ? is null 
            or d1_0.subject_id=?
        ) 
        and (
            ? is null 
            or d1_0.type=?
        ) 
    order by
        d1_0.created_at desc 
    fetch
        first ? rows only
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
Hibernate: 
    select
        v1_0.id,
        v1_0.answer_id,
        v1_0.created_at,
        v1_0.discussion_id,
        v1_0.is_upvote,
        v1_0.user_id 
    from
        discussion.votes v1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=v1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=?
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        b1_0.id 
    from
        discussion.bookmarks b1_0 
    left join
        discussion.users u1_0 
            on u1_0.id=b1_0.user_id 
    left join
        discussion.discussions d1_0 
            on d1_0.id=b1_0.discussion_id 
    where
        u1_0.id=? 
        and d1_0.id=? 
    fetch
        first ? rows only
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.discussion_id,
        t1_0.tag 
    from
        discussion.discussion_tags t1_0 
    where
        t1_0.discussion_id=?
Hibernate: 
    select
        t1_0.discussion_id,
        t1_0.tag 
    from
        discussion.discussion_tags t1_0 
    where
        t1_0.discussion_id=?
2025-07-22 13:13:56 [http-nio-8082-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.discussion_id,
        a1_0.attachment_url 
    from
        discussion.discussion_attachments a1_0 
    where
        a1_0.discussion_id=?
Hibernate: 
    select
        a1_0.discussion_id,
        a1_0.attachment_url 
    from
        discussion.discussion_attachments a1_0 
    where
        a1_0.discussion_id=?
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /search/groups?q=mathematics&page=0&size=10
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/search/groups
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /search/groups?q=mathematics&page=0&size=10
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        (
            g1_0.name like ? escape '' 
            or g1_0.description like ? escape ''
        ) 
        and (
            ? is null 
            or g1_0.type=?
        ) 
    fetch
        first ? rows only
Hibernate: 
    select
        g1_0.id,
        g1_0.avatar_url,
        g1_0.class_level,
        g1_0.created_at,
        g1_0.created_by_id,
        g1_0.description,
        g1_0.discussions_count,
        g1_0.is_private,
        g1_0.members_count,
        g1_0.name,
        g1_0.rules,
        g1_0.subject_id,
        g1_0.type,
        g1_0.updated_at 
    from
        discussion.discussion_groups g1_0 
    where
        (
            g1_0.name like ? escape '' 
            or g1_0.description like ? escape ''
        ) 
        and (
            ? is null 
            or g1_0.type=?
        ) 
    fetch
        first ? rows only
2025-07-22 13:14:07 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /search/users?q=moyen&page=0&size=10
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/search/users
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /search/users?q=moyen&page=0&size=10
2025-07-22 13:14:17 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.username like ? escape '' 
        or u1_0.full_name like ? escape '' 
    fetch
        first ? rows only
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.username like ? escape '' 
        or u1_0.full_name like ? escape '' 
    fetch
        first ? rows only
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /ai/ask
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/ai/ask
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:14:35 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /ai/ask
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /ai/ask
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/ai/ask
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /ai/ask
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AIController.askAI(com.educonnect.discussion.dto.AIQueryRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AIController]
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AIController.askAI(com.educonnect.discussion.dto.AIQueryRequest,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AIController]
2025-07-22 13:14:46 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.updated_at,
        u1_0.username 
    from
        discussion.users u1_0 
    where
        u1_0.id=?
2025-07-22 13:14:46 [http-nio-8082-exec-7] INFO  c.e.d.service.impl.AIServiceImpl - Processing AI request for user 1 - Type: QUESTION, Question: What is the derivative of x^2 + 3x + 5?...
2025-07-22 13:14:46 [http-nio-8082-exec-7] INFO  c.e.d.service.impl.GeminiServiceImpl - Sending request to Gemini API with prompt: Please help with: What is the derivative of x^2 + 3x + 5?

Context: I am studying calculus and need ...
2025-07-22 13:14:52 [http-nio-8082-exec-7] INFO  c.e.d.service.impl.GeminiServiceImpl - Successfully received response from Gemini API
2025-07-22 13:14:52 [http-nio-8082-exec-7] INFO  c.e.d.service.impl.AIServiceImpl - Successfully generated AI response with 814 characters
2025-07-22 13:14:52 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.ai_queries
        (answer, confidence, context, created_at, question, subject_id, topic_id, type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.ai_queries
        (answer, confidence, context, created_at, question, subject_id, topic_id, type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:14:52 [http-nio-8082-exec-7] INFO  c.e.d.service.impl.AIServiceImpl - Successfully processed and saved AI query with ID: 3
2025-07-22 13:14:52 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.ai_query_sources
        (ai_query_id, source) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.ai_query_sources
        (ai_query_id, source) 
    values
        (?, ?)
2025-07-22 13:14:52 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.ai_query_sources
        (ai_query_id, source) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.ai_query_sources
        (ai_query_id, source) 
    values
        (?, ?)
2025-07-22 13:14:52 [http-nio-8082-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.ai_query_sources
        (ai_query_id, source) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        discussion.ai_query_sources
        (ai_query_id, source) 
    values
        (?, ?)
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ai/history?page=0&size=10
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/ai/history
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ai/history?page=0&size=10
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AIController.getAIHistory(int,int,java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AIController]
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.AIController.getAIHistory(int,int,java.lang.Long,com.educonnect.discussion.security.UserPrincipal); target is of class [com.educonnect.discussion.controller.AIController]
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.answer,
        a1_0.confidence,
        a1_0.context,
        a1_0.created_at,
        a1_0.question,
        a1_0.subject_id,
        a1_0.topic_id,
        a1_0.type,
        a1_0.user_id 
    from
        discussion.ai_queries a1_0 
    where
        a1_0.user_id=? 
        and (
            ? is null 
            or a1_0.subject_id=?
        ) 
    fetch
        first ? rows only
Hibernate: 
    select
        a1_0.id,
        a1_0.answer,
        a1_0.confidence,
        a1_0.context,
        a1_0.created_at,
        a1_0.question,
        a1_0.subject_id,
        a1_0.topic_id,
        a1_0.type,
        a1_0.user_id 
    from
        discussion.ai_queries a1_0 
    where
        a1_0.user_id=? 
        and (
            ? is null 
            or a1_0.subject_id=?
        ) 
    fetch
        first ? rows only
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        s1_0.ai_query_id,
        s1_0.source 
    from
        discussion.ai_query_sources s1_0 
    where
        s1_0.ai_query_id=?
Hibernate: 
    select
        s1_0.ai_query_id,
        s1_0.source 
    from
        discussion.ai_query_sources s1_0 
    where
        s1_0.ai_query_id=?
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        s1_0.ai_query_id,
        s1_0.source 
    from
        discussion.ai_query_sources s1_0 
    where
        s1_0.ai_query_id=?
Hibernate: 
    select
        s1_0.ai_query_id,
        s1_0.source 
    from
        discussion.ai_query_sources s1_0 
    where
        s1_0.ai_query_id=?
2025-07-22 13:15:02 [http-nio-8082-exec-9] DEBUG org.hibernate.SQL - 
    select
        s1_0.ai_query_id,
        s1_0.source 
    from
        discussion.ai_query_sources s1_0 
    where
        s1_0.ai_query_id=?
Hibernate: 
    select
        s1_0.ai_query_id,
        s1_0.source 
    from
        discussion.ai_query_sources s1_0 
    where
        s1_0.ai_query_id=?
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /files/my?page=0&size=20
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/files/my
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /files/my?page=0&size=20
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getMyFiles(int,int); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getMyFiles(int,int); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:17 [http-nio-8082-exec-10] DEBUG org.hibernate.SQL - 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=? 
    order by
        fa1_0.uploaded_at desc 
    fetch
        first ? rows only
Hibernate: 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=? 
    order by
        fa1_0.uploaded_at desc 
    fetch
        first ? rows only
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /files/storage-info
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/files/storage-info
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /files/storage-info
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getStorageInfo(); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getStorageInfo(); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        sum(fa1_0.file_size) 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=?
Hibernate: 
    select
        sum(fa1_0.file_size) 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=?
2025-07-22 13:15:27 [http-nio-8082-exec-3] DEBUG org.hibernate.SQL - 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=? 
    order by
        fa1_0.uploaded_at desc
Hibernate: 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=? 
    order by
        fa1_0.uploaded_at desc
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /files/upload
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/files/upload
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /files/upload
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.uploadFile(org.springframework.web.multipart.MultipartFile,java.lang.String); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.uploadFile(org.springframework.web.multipart.MultipartFile,java.lang.String); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:42 [http-nio-8082-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        discussion.file_attachments
        (content_type, description, file_path, file_size, file_url, is_public, original_file_name, stored_file_name, uploaded_at, uploaded_by) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        discussion.file_attachments
        (content_type, description, file_path, file_size, file_url, is_public, original_file_name, stored_file_name, uploaded_at, uploaded_by) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /files/details/1
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/files/details/1
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /files/details/1
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getFileDetails(java.lang.Long); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getFileDetails(java.lang.Long); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:15:51 [http-nio-8082-exec-5] DEBUG org.hibernate.SQL - 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.id=?
Hibernate: 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.id=?
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /files/test_document_62691328-1b56-49bb-8180-84131404a6fe.txt
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/files/test_document_62691328-1b56-49bb-8180-84131404a6fe.txt
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /files/test_document_62691328-1b56-49bb-8180-84131404a6fe.txt
2025-07-22 13:16:02 [http-nio-8082-exec-6] DEBUG org.hibernate.SQL - 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.stored_file_name=?
Hibernate: 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.stored_file_name=?
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /files/storage-info
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Fixed JWT Filter processing request: /api/v1/files/storage-info
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header: Present
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Authorization header value: 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiU1RVREVOVCIsInVzZXJJZCI6MSwiZW1haWwiOiJtb3llbnVkZGluMDc1QGdtYWlsLmNvbSIsInN1YiI6Im1veWVuIiwiaWF0IjoxNzUzMTY4MDg4LCJleHAiOjE3NTMyNTQ0ODh9.lAQKLZWCwZ4ATTDSaCmPFtQ2TrdhsOKz-q4mNSmi5cJ-Gf0OFfwSkCEgfalUETT0fWPMdgvywQBr8A4qceTX1w'
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Header has text, checking if starts with 'Bearer '
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully extracted token, length: 256
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Token preview: eyJhbGciOiJIUzUxMiJ9...
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Parsed JWT token: Present (length: 256)
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Validating JWT token...
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Validating JWT token...
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - JWT token validation successful
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - JWT token validation result: true
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Extracting user details from JWT...
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.security.JwtUtilsFixed - Using JWT secret with length: 128
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Creating UserPrincipal for user: moyen with role: STUDENT
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG c.e.d.s.JwtAuthenticationFilterFixed - Successfully set authentication for user: moyen with authorities: [ROLE_STUDENT]
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /files/storage-info
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getStorageInfo(); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.educonnect.discussion.controller.FileUploadController.getStorageInfo(); target is of class [com.educonnect.discussion.controller.FileUploadController]
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        sum(fa1_0.file_size) 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=?
Hibernate: 
    select
        sum(fa1_0.file_size) 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=?
2025-07-22 13:16:13 [http-nio-8082-exec-8] DEBUG org.hibernate.SQL - 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=? 
    order by
        fa1_0.uploaded_at desc
Hibernate: 
    select
        fa1_0.id,
        fa1_0.content_type,
        fa1_0.description,
        fa1_0.file_path,
        fa1_0.file_size,
        fa1_0.file_url,
        fa1_0.is_public,
        fa1_0.original_file_name,
        fa1_0.stored_file_name,
        fa1_0.uploaded_at,
        fa1_0.uploaded_by 
    from
        discussion.file_attachments fa1_0 
    where
        fa1_0.uploaded_by=? 
    order by
        fa1_0.uploaded_at desc
2025-07-22 13:35:21 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
2025-07-22 14:05:21 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 0, completed tasks = 3]
